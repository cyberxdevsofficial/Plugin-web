<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ANUGA SENITHU WHATSAPP BOT PLUGINS</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>ðŸ”¥ Plugins ðŸ”¥</h1>
  <div id="plugin-list"></div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDkZ3D3NPNoZf1LdcLGMBRKcTWZUd71Gp0",
      authDomain: "anugasenithu-3912d.firebaseapp.com",
      projectId: "anugasenithu-3912d"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function loadPlugins() {
      const pluginList = document.getElementById("plugin-list");
      pluginList.innerHTML = "";
      const snapshot = await db.collection("plugins").get();
      snapshot.forEach(doc => {
        const plugin = doc.data();
        pluginList.innerHTML += `
          <div class="plugin">
            <h2>${plugin.name}</h2>
            <p>${plugin.description}</p>
            <pre>${plugin.code}</pre>
            <button onclick="downloadPlugin('${plugin.name}', \`${plugin.code}\`)">Download</button>
          </div>
        `;
      });
    }

    function downloadPlugin(name, code) {
      const blob = new Blob([code], { type: "text/plain" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = name + ".txt";
      a.click();
    }

    loadPlugins();
  </script>
</body>
</html>
